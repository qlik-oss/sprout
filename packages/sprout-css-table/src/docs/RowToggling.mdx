import { Canvas, Controls, Meta } from "@storybook/addon-docs/blocks";
import * as ListStories from "./ListTable.stories";

<Meta title="Docs/Rows/Row toggling" />

# Row toggling

When the primary row action is of binary nature, such as opening / closing panel, the row will respond accordingly using toggled state.
It is possible to have only one row in toggled state at a time, so, if user click on another row, the previous row will untoggle.

<strong>ℹ️ Note:</strong> When implementing fully controlled mode, developers should follow and respect [Table
specification](https://internal.qlik.dev/design/sprout/components/table/), the part where row toggling is explained.

## Passing toggled row state

The toggled row state can be used by passing either `defaultToggledRowId` or `onToggledRowChange` function as Table prop.

### Default row toggling state

If we would like to set an initial toggled row, this can be done by passing `defaultToggledRowId` as prop to the table.

Example: opening / closing Panel when toggling the row, to display row details.
In such case, when refreshing application with opened Panel, we would like corresponding row in the Table to be already toggled / highlighted.

```tsx
import { Table } from "@qlik/sprout-css-table";

// the entity with such id should be present in rows array in order for default toggling state to work
const defaultToggledRowId = "entity-id";

return <Table rows={rows} columns={columns} defaultToggledRowId={defaultToggledRowId} />;
```

### Controlled row toggling

The controlled row toggling is useful in scenarios where we would like to control toggled row externally, and execute some code
when toggled row state changes.
Example: Opening / closing Panel when row is toggled / untoggled.

Use `toggledRowId` table prop to control the state of toggled row

Use `onToggledRowChange` function as table prop to listen to changes in toggled row state.

<strong>ℹ️ Note:</strong> if needed, `defaultToggledRowId` can be also passed.

```tsx
import { useState } from "react";
import { Table } from "@qlik/sprout-css-table";

function ComponentUsingTable() {
  const [toggledRowId, setToggledRowId] = useState<string | undefined>();

  const onToggledRowChange = (rowId: string | undefined) => {
    setToggledRowId(rowId);

    if (rowId) {
      // do something when row will toggle
    } else {
      // do something when row will untoggle
    }
  };

  return <Table rows={rows} columns={columns} toggledRowId={toggledRowId} onToggledRowChange={onToggledRowChange} />;
}
```

<Canvas of={ListStories.RowToggling} />

## API

<Controls of={ListStories.RowToggling} />
