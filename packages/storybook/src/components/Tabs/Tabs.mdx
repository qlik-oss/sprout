import { Canvas, Controls, Meta } from "@storybook/addon-docs/blocks";

import * as Stories from "./Tabs.stories";

<Meta title="Components/Tabs" of={Stories} />

# Tabs

Tabs are used for navigation.

## Table of Contents

- [Usage](#usage)
- [Properties](#properties)
  - [Composition API](#composition-api)
  - [Tabs API](#tabs-api)
  - [Tabs without Panels](#tabs-without-panels)
- [Accessibility](#accessibility)

---

## Usage

```tsx
import { Tabs } from "@qlik/sprout-css-react";

// Composition API (recommended)
function MyComponent() {
  return (
    <Tabs.Container>
      <Tabs.List showTrack>
        <Tabs.Tab aria-controls="Assets" title="Assets" icon={<BookIcon />} />
        <Tabs.Tab
          aria-controls="Users"
          title="Users"
          icon={<StarIcon />}
          disabled
        />
      </Tabs.List>
      <Tabs.Panel id="Assets">Tab content for Assets</Tabs.Panel>
      <Tabs.Panel id="Settings">Tab content for Settings</Tabs.Panel>
    </Tabs.Container>
  );
}

// ------- OR --------

// Tabs API
function MyComponent() {
  // memoize tabs to avoid re-renders
  const TABS = [
    {
      title: "Assets", //needed for state management
      "aria-controls": "Assets",
      icon: <BookIcon />,
      panel: <div>Tab 1 content</div>,
    },
    {
      title: "Settings",
      "aria-controls": "Settings",
      icon: <CogwheelIcon />,
      panel: <div>Tab 2 content</div>,
    },
    // ... more tabs
  ];

  return <Tabs showTrack={true} tabs={TABS} />;
}
```

## Properties

> _By passing the props `activeKey` and `onSelect` The selected Tab becomes controlled_

### Composition API

<Canvas of={Stories.Uncontrolled} />

<Controls of={Stories.Uncontrolled} />

### Tabs API

> _Note: tabs must be memoized to not trigger re-render_

<Canvas of={Stories.UncontrolledWithTabsProp} />

<Controls of={Stories.UncontrolledWithTabsProp} />

### Tabs without Panels

You can use the only the Tabs has a navigation component without the Tab Panels.

<Canvas of={Stories.TabsWithoutPanel} />

## Accessibility

[W3/WAI/ARIA/APG Tabs](https://www.w3.org/WAI/ARIA/apg/patterns/tabs/)

HTML structure:

- `Tabs.Container`
  - `Tabs.List` -> `Tabs.Tab`
  - `Tabs.Panel`
- `Tabs.Container` is a `nav` HTML element
- `Tabs.List` is a `div` with `role="tablist"` attribute
- `Tabs.Tab` use a `button` to trigger the visibility of the TabPanel
- `Tabs.Panel` is a `div` with a role="tabpanel" attribute

Keyboard interaction

- `Tabs.Tab`: When focus moves into the `Tabs.List`, places focus on the active `Tab` element.
- `Tabs.Tab`: When the `Tabs.list` contains the focus, moves focus to the next element in the page tab sequence outside the tablist, which is the tabpanel unless the first element containing meaningful content inside the tabpanel is focusable.
- When focus is on a tab element in a horizontal tab list:
  - `ArrowLeft`: moves focus to the previous `Tab`. If focus is on the first tab, moves focus to the last tab.
  - `ArrowRight`: Moves focus to the next `Tab`. If focus is on the last tab element, moves focus to the first tab.
  - if `document.dir` is `rtl` this is reversed
- When focus is on a `Tab` in a `Tabs.list` with either horizontal or vertical orientation:
  - `Space` or `Enter`: Activates the tab if it was not activated automatically on focus.
  - `Home`: Moves focus to the first tab. Optionally, activates the newly focused tab (See note below).
  - `End`: Moves focus to the last tab. Optionally, activates the newly focused tab (See note below).
