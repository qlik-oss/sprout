import{j as e,r as b}from"./iframe-BQJExRCF.js";import{s as W}from"./sprout-DxA14K3u.js";import{T as D}from"./TanstackTable-Bs1NmEfZ.js";import{F as $}from"./Copy-ERSXBUQF.js";import{F as B}from"./Edit-Bc7r3LZJ.js";import{b as q,I as U,a as z,c as y}from"./Icons-D8r5JLXA.js";import{F as N}from"./Undo-B1PPlUQq.js";import{F as H}from"./Info-BfRROe8g.js";import{T as F}from"./Tag-DLmRXsBI.js";import{t as J}from"./sprout-tokens-D9QRO1qB.js";import{c as x}from"./classNames-B0wfWtWT.js";import{u as V}from"./useI18n-B99T9obj.js";import{I as _}from"./IconButton-BEI3RZpW.js";import{L as u}from"./List-BPN2kntc.js";import{B as Z}from"./Badge-B9--3FkB.js";import{T as G}from"./Tooltip-CVFOQrqK.js";import{C as K}from"./Checkbox-DxL7CNq4.js";import"./preload-helper-PPVm8Dsz.js";import"./Button-C7-D-GN_.js";import"./icons-CzMI2h-K.js";import"./Button.module-C2ELNEem.js";import"./ProgressCircular-B4mHH4_Y.js";import"./SortDescending-BWpZ9BF7.js";import"./Menu-D_upy4ds.js";import"./useControl-XJuj1vyK.js";import"./Divider-Byw016rg.js";import"./useId-Drz8gmS2.js";import"./list-B1zo5gaH.js";import"./renderOrClone-DAgGzV0n.js";import"./NewTab-BMHt_Vx2.js";import"./Skeleton-C323E7Fo.js";import"./Popover-CTsqc6Mc.js";import"./TextField-C-5GsH-r.js";import"./useValueControl-CRzMHMlu.js";import"./Error-B95qseKK.js";import"./InputButton-CeEVJl7G.js";import"./useFieldProps-C0xARZ1e.js";import"./useFieldAriaProps-DaZEG-MV.js";import"./Field-BIldF_Al.js";import"./FieldLabel-BWOyYL3A.js";import"./InfoTooltipPrimitive-BqPdPqRN.js";import"./HelperText-CWubgWiG.js";import"./Radio-CIqNDp5q.js";import"./Message-C0IrDS9-.js";import"./ProgressBar-LweF-ALg.js";import"./Add-CPO6AOva.js";import"./AiSparkles-ybqQooZU.js";import"./Next-BCf902gw.js";import"./Bookmark-DEDDSCCD.js";import"./Upload-JDlmgr1C.js";import"./Text-fjMciMda.js";import"./Close-VT6FC74F.js";import"./Person-8oMSnh08.js";import"./Delete-CrLV--N3.js";import"./Filter-bb23MOEL.js";import"./History-BSF-XiSG.js";import"./Search-B3R4dCNd.js";import"./Subtract-Ca-OouU7.js";import"./Map-pFYOI1fT.js";import"./Notification-BlWUDy4b.js";import"./Paste-Cd-nv27Q.js";import"./Warning-BB_ZpJQH.js";import"./Tenant-I_uTRlDg.js";import"./TextOverflow-D_EYc0DY.js";import"./useHasOverflow-o-wZv5E2.js";import"./useListGesture-B8rp38Ns.js";function Q(){return e.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{id:"icons/outline/dropdown_arrow_16",children:e.jsx("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M7.999 9.001L5.14149 6.14159C5.06337 6.06341 4.93664 6.06342 4.85853 6.14161L4.14126 6.8596C4.06323 6.93771 4.06325 7.06427 4.1413 7.14235L6.999 10.001L7.85772 10.8589C7.93578 10.9368 8.06225 10.9369 8.14035 10.8589L9 10.001L11.8586 7.14235C11.9367 7.06427 11.9368 6.93769 11.8587 6.85958L11.1414 6.14156C11.0633 6.06339 10.9366 6.06336 10.8585 6.14149L7.999 9.001Z",fill:"currentColor"})})})}function X(){return e.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{id:"icons/outline/dropright_arrow_16",children:e.jsx("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M8.501 8.501L5.64159 11.3585C5.56341 11.4366 5.56342 11.5634 5.64161 11.6415L6.3596 12.3587C6.43771 12.4368 6.56427 12.4368 6.64235 12.3587L9.501 9.501L10.3589 8.64228C10.4368 8.56422 10.4369 8.43775 10.3589 8.35965L9.501 7.5L6.64235 4.64135C6.56427 4.56327 6.43769 4.56324 6.35958 4.64128L5.64156 5.35858C5.56339 5.43667 5.56336 5.56336 5.64149 5.64149L8.501 8.501Z",fill:"currentColor"})})})}function P({id:t,children:s,label:c,path:p,disabled:d,expanded:o,onExpand:n,nesting:r,icon:i,displayFolderIcon:l,isLeaf:a,...f}){const h=V(),T=!!o;let k=r||0;p&&(k=p.length);const A=()=>{n&&n(t,!T)};let C=i;return l&&(C=T?e.jsx(q,{}):e.jsx(N,{})),e.jsxs("div",{id:t,className:x("relative","flex","flex-row","items-center","font-label-s","py-s","w-full","overflow-hidden",{"text-default":!d,"text-disabled":!!d}),...f,children:[e.jsx("div",{className:x("pl-m","shrink-0"),style:{inlineSize:`calc(${k} * ${J.common_sizing_xxl})`}}),e.jsx("span",{className:x({invisible:!!a}),children:e.jsx(_,{variant:"quiet",size:"small",disabled:d,tabIndex:-1,icon:T?e.jsx(Q,{}):e.jsx(X,{}),onClick:A,"aria-label":h(T?"treeitem.label.close":"treeitem.label.expand")})}),e.jsxs("div",{"data-layoutid":"IconItem",className:x("flex","flex-row","items-center","gap-s","w-full","overflow-hidden"),children:[C?e.jsx("span",{className:x("shrink-0","flex","items-center"),children:C}):null,e.jsx("div",{className:x("flex","flex-row","flex-nowrap","w-max"),children:c}),s]})]})}P.displayName="Tree.TreeItem";const m={TreeItem:P},Y={id:{control:"text",description:"Unique identifier for the tree item.",table:{type:{summary:"string"}}},label:{control:"text",description:"The label of the tree item.",table:{type:{summary:"string"}}},path:{control:"object",description:"An array representing the path to the tree item, used for nesting.",table:{type:{summary:"string[]"}}},isLeaf:{control:"boolean",description:"Indicates if the tree item is a leaf node (no children).",table:{type:{summary:"boolean"}}},disabled:{control:"boolean",description:"Disables the tree item and prevents user interaction.",table:{type:{summary:"boolean"}}},nesting:{control:"number",description:"The nesting level of the tree item, used for indentation.",table:{type:{summary:"number"}}},expanded:{control:"boolean",description:"Controls the expanded state of the tree item.",table:{type:{summary:"boolean"}}},onExpand:{control:"object",description:"Callback function when the tree item is expanded or collapsed.",table:{type:{summary:"(id: string, expanded: boolean) => void"}}},icon:{control:"select",if:{arg:"expandedIcon",exists:!1},description:"Icon to display next to the tree item label.",table:{type:{summary:"ReactNode | (expanded: boolean) => ReactNode"}},options:z,mapping:U},children:{control:"select",description:"The content of the tree item.",options:["Text","Tag"],mapping:{Text:"This is a tree item",Tag:e.jsx(F,{text:"Tag"})},table:{type:{summary:"ReactNode"}}}},ft={title:"Components/Tree"},L={render:t=>e.jsx(m.TreeItem,{...t}),args:{id:"treeitem",label:"TreeItem"},argTypes:Y},j={render:()=>e.jsxs("div",{children:[e.jsx("h1",{className:W.classNames("text-default","font-heading-m"),children:"TreeItem alone"}),e.jsx(m.TreeItem,{id:"simple",label:"Simple"}),e.jsx(m.TreeItem,{id:"simple",label:"Simple",disabled:!0}),e.jsx(m.TreeItem,{id:"expanded",label:"Expanded",expanded:!0}),e.jsx(m.TreeItem,{id:"expanded-child",path:["expanded"],label:"Expanded child"}),e.jsx(m.TreeItem,{id:"folder",label:"folder",icon:e.jsx(N,{})}),e.jsx(m.TreeItem,{id:"folder_expanded",label:"folder expanded",displayFolderIcon:!0,expanded:!0}),e.jsx(m.TreeItem,{id:"leaf",path:["folder_expanded"],label:"Leaf",isLeaf:!0}),e.jsx(m.TreeItem,{id:"leaf-icon",path:["folder_expanded"],label:"Leaf icon",isLeaf:!0,icon:e.jsx(y,{})}),e.jsxs(u,{hasPadding:!1,children:[e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_simple",label:"Simple"})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_expanded",label:"Expanded"})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_folder",label:"folder",displayFolderIcon:!0})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_folder_child",path:["context_folder"],label:"child",isLeaf:!0})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_folder_expanded",label:"folder expanded",displayFolderIcon:!0})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_leaf",path:["context_folder_expanded"],label:"Leaf",isLeaf:!0})}),e.jsx(u.Item,{interactive:!0,children:e.jsx(m.TreeItem,{id:"context_leaf-icon",path:["context_folder_expanded"],label:"Leaf icon",isLeaf:!0,icon:e.jsx(y,{})})})]})]})},g=b.createContext({expanded:{},selected:{},onExpand:()=>{}}),I=[{id:"folder1",label:"Folder with 1 folder and 2 files"},{id:"folder1.1",label:"Folder with 1 files",path:["folder1"]},{id:"item1",label:"File 1",path:["folder1","folder1.1"],isLeaf:!0},{id:"item2",label:"File 2",path:["folder1"],isLeaf:!0},{id:"item3",label:"File  3",path:["folder1"],isLeaf:!0},{id:"folder2",label:"Empty folder",children:e.jsxs("div",{className:x("flex","flex-row","items-center","justify-end","w-full"),children:[e.jsx(_,{variant:"quiet",icon:e.jsx($,{}),"aria-label":"Copy"}),e.jsx(_,{variant:"quiet",icon:e.jsx(B,{}),"aria-label":"Edit"})]})},{id:"item4",label:"Orphan file",isLeaf:!0,children:e.jsx(F,{text:"Tag"})},{id:"item5",label:"Orphan file",isLeaf:!0,children:e.jsx(Z,{color:"info"})},{id:"item6",label:"Orphan file",isLeaf:!0,children:e.jsx(G,{title:"I'm a tooltip",children:e.jsx("button",{type:"button",className:x("flex","p-xs","m-xs","border-box","border-none","bg-transparent","cursor-pointer","radius-round","outline-focus-visible-centered"),children:e.jsx(H,{})})})},{id:"item7",label:"a-cron-long-long-long-long-long-long-long-long-long-long-long-long-long-long-long-long (V2)",isLeaf:!0}];function M(t,s){const c=new Set(s),p=new Map,d=new Map;for(const r of t){p.set(r.id,r);const i=r.path??[];if(i.length){const l=i[i.length-1];d.has(l)||d.set(l,[]),d.get(l).push(r.id)}}const o={};for(const r of t)(r.isLeaf||!d.has(r.id))&&(o[r.id]=!!c.has(r.id));const n=[...t].sort((r,i)=>(i.path?.length??0)-(r.path?.length??0));for(const r of n){if(r.isLeaf)continue;const l=(d.get(r.id)??[]).map(a=>o[a]);if(l.length===0)o[r.id]=!!c.has(r.id);else{const a=l.every(h=>h===!0),f=l.every(h=>h===!1);a?o[r.id]=!0:f?o[r.id]=!1:o[r.id]="partial"}}return o}function R({id:t,label:s,onCheck:c,isLeaf:p,path:d,children:o}){const n=b.useContext(g);let r=!0;const i=n.selected[t]==="partial",l=i?!0:!!n.selected[t];let a=!!n.expanded[t];return n&&d&&(a=!!n?.expanded?.[t],r=d.every(f=>!!n?.expanded?.[f])),r?e.jsx(u.Item,{interactive:!0,onClick:()=>{n.onExpand?.(t,!a)},selected:l,children:e.jsxs("div",{className:x("flex","flex-row","w-full","pl-l","pr-l","items-center","overflow-hidden"),children:[e.jsx("div",{className:x("flex","w-fit"),children:e.jsx(K,{"aria-label":s,indeterminate:i,checked:l,onChange:f=>{c({id:t,checked:!l})}})}),e.jsx(m.TreeItem,{id:t,label:s,path:d,isLeaf:p,expanded:a,onExpand:()=>{n.onExpand?.(t,!a)},displayFolderIcon:!p,icon:p?e.jsx(y,{}):e.jsx(N,{}),children:o})]})}):null}function O(t,s,c,p){const d=new Map,o=new Map;for(const a of t){d.set(a.id,a);const f=a.path??[];if(f.length){const h=f[f.length-1];o.has(h)||o.set(h,[]),o.get(h).push(a.id)}}function n(a){const f=o.get(a)??[],h=[...f];for(const T of f)h.push(...n(T));return h}const r=new Set(s);if(!d.get(c))return s;const l=[c,...n(c)];if(p)for(const a of l)r.add(a);else for(const a of l)r.delete(a);return[...r]}const v={parameters:{chromatic:{disableSnapshot:!0}},render:()=>{const[t,s]=b.useState({item4:!0}),[c,p]=b.useState({}),d=n=>{const r=Object.keys(t).filter(a=>t[a]===!0),i=O(I,r,n.id,n.checked),l=M(I,i);s(l)},o=(n,r)=>{p(i=>({...i,[n]:r}))};return e.jsx("div",{className:x("flex","w-m"),children:e.jsx(u,{hasPadding:!1,children:e.jsx(g.Provider,{value:{expanded:c,selected:t,onExpand:o},children:I.map(n=>e.jsx(R,{id:n.id,path:n.path,isLeaf:n.isLeaf,label:n.label,onCheck:d,children:n.children},n.id))})})})}},E=[{id:"folder1",label:"FirstFolderWithAReallyLongNameThatExceedsTheLimitAtSomePoint with 1 folder and 2 files"},{id:"folder1.1",label:"SecondFolderWithAReallyLongNameThatExceedsTheLimitAtSomePoint with 1 files and 1 folder",path:["folder1"]},{id:"folder1.1.1",label:"ThirdFolderWithAReallyLongNameThatExceedsTheLimitAtSomePoint without files",path:["folder1","folder1.1"]},{id:"item1",label:"File 1",path:["folder1","folder1.1"],isLeaf:!0},{id:"item2",label:"File 2",path:["folder1"],isLeaf:!0},{id:"item3",label:"File  3",path:["folder1"],isLeaf:!0},{id:"folder2",label:"Empty folder"},{id:"item4",label:"Orphan file",isLeaf:!0}],S={parameters:{chromatic:{disableSnapshot:!0}},render:()=>{const[t,s]=b.useState({}),[c,p]=b.useState({folder1:!0,"folder1.1":!0}),d=n=>{const r=Object.keys(t).filter(a=>t[a]===!0),i=O(E,r,n.id,n.checked),l=M(E,i);s(l)},o=(n,r)=>{p(i=>({...i,[n]:r}))};return e.jsx("div",{className:x("flex","w-m","border-weak","overflow-auto"),children:e.jsx(u,{hasPadding:!1,children:e.jsx(g.Provider,{value:{expanded:c,selected:t,onExpand:o},children:E.map(n=>e.jsx(R,{id:n.id,path:n.path,isLeaf:n.isLeaf,label:n.label,onCheck:d},n.id))})})})}};function ee({row:t}){const s=b.useContext(g),c=!!s.expanded[t.id];return e.jsx("div",{className:x("flex","flex-row","w-full","pl-l","pr-l","items-center","overflow-hidden"),onClick:()=>{s.onExpand?.(t.id,!c)},children:e.jsx(m.TreeItem,{onExpand:s.onExpand,expanded:c,id:t.id,displayFolderIcon:!t.isLeaf,label:t.label,isLeaf:t.isLeaf,path:t.path,icon:t.isLeaf?e.jsx(y,{}):e.jsx(N,{})})})}const te=[{field:"label",headerName:"Name",width:300,renderCell:t=>e.jsx(ee,{row:t.row})},{field:"path",headerName:"Path",flex:1,renderCell:t=>(t.row.path||[]).join(" / ")}],w={parameters:{chromatic:{disableSnapshot:!0}},render:()=>{const[t,s]=b.useState({}),c=b.useMemo(()=>I.filter(p=>p.path?p.path.every(d=>!!t[d]):!0),[t,I]);return e.jsxs("div",{className:x("border-weak","w-l"),children:[e.jsx(g.Provider,{value:{expanded:t,selected:{},onExpand:(p,d)=>{s({...t,[p]:d})}},children:e.jsx(D,{variant:"list",rows:c,columns:te,rowHeight:40})}),e.jsx("pre",{children:JSON.stringify(t,null,2)})]})}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  render: props => <Tree.TreeItem {...props} />,
  args: {
    id: "treeitem",
    label: "TreeItem"
  },
  argTypes: TreeItemArgTypes
}`,...L.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  render: () => <div>
      <h1 className={sprout.classNames("text-default", "font-heading-m")}>TreeItem alone</h1>
      <Tree.TreeItem id="simple" label="Simple" />
      <Tree.TreeItem id="simple" label="Simple" disabled />
      <Tree.TreeItem id="expanded" label="Expanded" expanded />
      <Tree.TreeItem id="expanded-child" path={["expanded"]} label="Expanded child" />
      <Tree.TreeItem id="folder" label="folder" icon={<FolderClosedIcon />} />
      <Tree.TreeItem id="folder_expanded" label="folder expanded" displayFolderIcon expanded />
      <Tree.TreeItem id="leaf" path={["folder_expanded"]} label="Leaf" isLeaf />
      <Tree.TreeItem id="leaf-icon" path={["folder_expanded"]} label="Leaf icon" isLeaf icon={<FileIcon />} />
      <List hasPadding={false}>
        <List.Item interactive>
          <Tree.TreeItem id="context_simple" label="Simple" />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_expanded" label="Expanded" />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_folder" label="folder" displayFolderIcon />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_folder_child" path={["context_folder"]} label="child" isLeaf />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_folder_expanded" label="folder expanded" displayFolderIcon />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_leaf" path={["context_folder_expanded"]} label="Leaf" isLeaf />
        </List.Item>
        <List.Item interactive>
          <Tree.TreeItem id="context_leaf-icon" path={["context_folder_expanded"]} label="Leaf icon" isLeaf icon={<FileIcon />} />
        </List.Item>
      </List>
    </div>
}`,...j.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  parameters: {
    chromatic: {
      disableSnapshot: true
    }
  },
  render: () => {
    const [treeSelected, setTreeSelected] = useState<TreeContextType["selected"]>({
      item4: true
    });
    const [treeExpanded, setTreeExpanded] = useState<TreeContextType["expanded"]>({});
    const onCheck = (e: {
      id: string;
      checked: boolean;
    }) => {
      const selectedNodesIds = Object.keys(treeSelected).filter(key => treeSelected[key] === true);
      const newSelectedIds = updateSelectedNodeIds(data, selectedNodesIds, e.id, e.checked);
      const newState = computeNodeSelectionState(data, newSelectedIds);
      setTreeSelected(newState);
    };
    const onExpand = (id: string, expanded: boolean) => {
      setTreeExpanded(prev => ({
        ...prev,
        [id]: expanded
      }));
    };
    return <div className={classNames("flex", "w-m")}>
        <List hasPadding={false}>
          <TreeContext.Provider value={{
          expanded: treeExpanded,
          selected: treeSelected,
          onExpand
        }}>
            {data.map(item => <MyListItem key={item.id} id={item.id} path={item.path} isLeaf={item.isLeaf} label={item.label} onCheck={onCheck}>
                {item.children}
              </MyListItem>)}
          </TreeContext.Provider>
        </List>
      </div>;
  }
}`,...v.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`{
  parameters: {
    chromatic: {
      disableSnapshot: true
    }
  },
  render: () => {
    const [treeSelected, setTreeSelected] = useState<TreeContextType["selected"]>({});
    const [treeExpanded, setTreeExpanded] = useState<TreeContextType["expanded"]>({
      folder1: true,
      "folder1.1": true
    });
    const onCheck = (e: {
      id: string;
      checked: boolean;
    }) => {
      const selectedNodesIds = Object.keys(treeSelected).filter(key => treeSelected[key] === true);
      const newSelectedIds = updateSelectedNodeIds(dataWithLongNames, selectedNodesIds, e.id, e.checked);
      const newState = computeNodeSelectionState(dataWithLongNames, newSelectedIds);
      setTreeSelected(newState);
    };
    const onExpand = (id: string, expanded: boolean) => {
      setTreeExpanded(prev => ({
        ...prev,
        [id]: expanded
      }));
    };
    return <div className={classNames("flex", "w-m", "border-weak", "overflow-auto")}>
        <List hasPadding={false}>
          <TreeContext.Provider value={{
          expanded: treeExpanded,
          selected: treeSelected,
          onExpand
        }}>
            {dataWithLongNames.map(item => <MyListItem key={item.id} id={item.id} path={item.path} isLeaf={item.isLeaf} label={item.label} onCheck={onCheck} />)}
          </TreeContext.Provider>
        </List>
      </div>;
  }
}`,...S.parameters?.docs?.source}}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  parameters: {
    chromatic: {
      disableSnapshot: true
    }
  },
  render: () => {
    const [treeExpanded, setTreeExpanded] = useState<TreeContextType["expanded"]>({});
    const filteredData = useMemo(() => {
      return data.filter(item => {
        if (!item.path) return true;
        return item.path.every(p => !!treeExpanded[p]);
      });
    }, [treeExpanded, data]);
    return <div className={classNames("border-weak", "w-l")}>
        <TreeContext.Provider value={{
        expanded: treeExpanded,
        selected: {},
        onExpand: (id: string, expanded: boolean) => {
          setTreeExpanded({
            ...treeExpanded,
            [id]: expanded
          });
        }
      }}>
          <Table variant="list" rows={filteredData} columns={columns} rowHeight={40} />
        </TreeContext.Provider>
        <pre>{JSON.stringify(treeExpanded, null, 2)}</pre>
      </div>;
  }
}`,...w.parameters?.docs?.source}}};const ht=["TreeItem","Playground","WithCheckbox","WithCheckboxAndLongNames","TreeTable"];export{j as Playground,L as TreeItem,w as TreeTable,v as WithCheckbox,S as WithCheckboxAndLongNames,ht as __namedExportsOrder,ft as default};
