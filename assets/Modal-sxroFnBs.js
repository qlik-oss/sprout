import{r as n,j as s,T as X,n as Y}from"./iframe-D-N3fK2j.js";import{D as ee,a as te,u as oe}from"./Tooltip-DaX3jRge.js";import{u as T}from"./useId-Bkl3iN6O.js";import{s as N}from"./sprout-UDo5dA_z.js";import{c as m}from"./classNames-CrSIhzis.js";import{u as q}from"./useI18n-ClHBar3-.js";import{B as se}from"./Button-BiiNVP7I.js";import{F as ae}from"./Close-Clva93gw.js";import{a as ne}from"./icons-BEmnCRju.js";import{I as le}from"./InfoTooltipPrimitive-C8Uq1qY7.js";import{I as H}from"./IconButton-Dg4ysz4Z.js";import{u as re}from"./useHasOverflow-BWQUK3f5.js";import{D as P}from"./Divider-Aa9jm5B9.js";import{t as g}from"./sprout-tokens-C4H4srAS.js";import{D as ie,u as ce}from"./Dialog-CiRpLpyf.js";function de({boxSizing:e,initialSize:t="s"}={}){const[o,a]=n.useState(t),l=n.useRef(null),i=n.useRef(null),[r,d]=n.useState(()=>N.createContainer(t,null));return n.useLayoutEffect(()=>{d(N.createContainer(o,l.current))},[o]),n.useLayoutEffect(()=>{const u=N.widthObserver(()=>l.current,{boxSizing:e,onResize:f=>{if(typeof f>"u")return;const c=r.match(f);i.current!==c&&(i.current=c,a(c))}});return u.observe(),()=>{u.disconnect()}},[e,r]),{ref:l,get:r.get,classNames:r.classNames}}function ue({children:e}){const[t]=n.useState(()=>{const o=document.createElement("div");return o.dataset.sproutPortal="true",o});return document.body.contains(t)||document.body.appendChild(t),n.useEffect(()=>()=>{document.body.contains(t)&&document.body.removeChild(t)},[t]),s.jsx(X,{onLoad:o=>{Object.assign(t.dataset,{...o})},children:Y.createPortal(e,t)})}const fe="_modal__backdrop_rs3py_1",me="_modal_rs3py_1",xe="_modal_body_rs3py_78",E={modal__backdrop:fe,modal:me,modal_body:xe},be=n.forwardRef(_e);function _e(e,t){const{children:o,visible:a,...l}=e;return a?s.jsx(ue,{children:s.jsx("div",{...l,className:E.modal__backdrop,ref:t,children:o})}):null}const ge="_dialog_actions_1kbe7_1",pe="_dialog_actions_container_1kbe7_9",he="_dialog_actions_start_section_1kbe7_13",ve="_dialog_actions_end_section_1kbe7_17",k={dialog_actions:ge,dialog_actions_container:pe,dialog_actions_start_section:he,dialog_actions_end_section:ve};function ye({children:e,labelClose:t,left:o,metaLabel:a,onClickClose:l,preventClose:i=!1,...r}){const d=de({boxSizing:"border-box"}),f=q()("dialog.actions.close");return s.jsx("div",{...r,ref:d.ref,className:m("border-box",k.dialog_actions),children:s.jsxs("div",{className:m("flex","justify-end","flex-row","border-box","items-center","py-xl","px-xxl","w-full","gap-l","flex-wrap",k.dialog_actions_container),children:[o||a?s.jsxs("div",{className:m("flex","flex-row","justify-between","grow-1","flex-wrap","gap-m",k.dialog_actions_start_section),children:[o?s.jsx("div",{className:m("flex","items-center"),children:o}):null,a?s.jsx("span",{className:m("flex","flex-row","border-box","font-label-s"),children:a}):null]}):null,s.jsxs("div",{className:m("flex","flex-row","border-box","justify-end","gap-m","flex-wrap",k.dialog_actions_end_section),children:[!i&&s.jsx(se,{variant:"quiet",onClick:()=>{l&&l()},"data-testid":"modal.buttons.close","data-feature":"modal.buttons.close",label:t||f,justified:d.get({xxs:!0,s:!1})}),e]})]})})}function Ce({children:e,padding:t,overflowX:o="hidden",overflowY:a="auto",divider:l="auto",...i}){const r=n.useRef(null),d=re(r),[u,f]=n.useState(d.overflowY);let c=l==="visible";return c||l==="auto"&&u&&a==="auto"&&(c=!0),n.useEffect(()=>{d.overflowY!==u&&a==="auto"&&f(d.overflowY)},[d.overflowY,u,a]),s.jsxs(s.Fragment,{children:[c?s.jsx(P,{}):null,s.jsx("div",{className:m("text-default","font-body-s","flex-noreset","flex-col","border-box","py-0","grow-1",E.modal_body,{"px-xxl":t===void 0||!!t,"overflow-y-auto":a==="auto","overflow-x-auto":o==="auto","overflow-y-scroll":a==="scroll","overflow-x-scroll":o==="scroll","overflow-y-hidden":a==="hidden","overflow-x-hidden":o==="hidden"}),"data-testid":"modal.content",role:a==="auto"?"region":void 0,"data-scrollable":a==="auto"&&u?"true":"false",...i,ref:r,tabIndex:a==="auto"&&u?0:-1,children:e}),c?s.jsx(P,{}):null]})}const $=n.createContext({labelId:null,descId:null});function je(){return n.useContext($)}function ke({"data-testid":e="dialog.header",children:t,description:o,descriptionId:a,icon:l,infoIconTooltip:i,labelBack:r,labelClose:d,labelId:u,onClickBack:f,onClickClose:c,preventClose:x=!1,...b}){const p=je(),h=q(),v=n.useId(),w=n.useId(),C=u||p.labelId||v,B=a||p.descId||w,I=h("dialog.header.close"),D=h("dialog.header.back");return s.jsxs("div",{className:m("flex","flex-row","justify-between","p-xl","pl-xxl","shrink-0","items-center"),"data-testid":e,...b,children:[s.jsxs("div",{className:m("flex","flex-col","justify-center","gap-s","overflow-hidden"),"data-testid":`${e}.title`,children:[s.jsxs("div",{className:m("flex","flex-row","items-center","gap-m","flex-wrap"),children:[s.jsxs("span",{className:m("flex","flex-row","items-center","gap-m"),children:[l?s.jsx("span",{className:m("shrink-0","pr-m","flex","items-center","justify-center"),children:l}):null,f||r?s.jsx(H,{variant:"quiet",icon:s.jsx(ne,{className:m("rtl-rotate-y-180")}),onClick:f,label:r||D}):null,typeof t=="string"?s.jsx("span",{className:m("text-default","font-label-m-emphasized","break-words"),id:C,children:t}):t]}),i?s.jsx(le,{title:i,"aria-labelledby":C}):null]}),o&&typeof o=="string"?s.jsx("span",{className:m("font-label-s","text-weak","break-words"),id:B,"data-testid":`${e}.description`,children:o}):o]}),!x&&s.jsx("span",{className:m("self-start"),children:s.jsx(H,{variant:"quiet",icon:s.jsx(ae,{}),onClick:c,label:d||I,"data-testid":`${e}.close`})})]})}function M(e){return s.jsx(ke,{...e})}function R(e){return s.jsx(Ce,{...e})}function S(e){return s.jsx(ye,{...e})}M.displayName="Modal.Header";R.displayName="Modal.Content";S.displayName="Modal.Actions";const we=n.forwardRef(De),Ie={xxs:g.container_sizing_xxs,xs:g.container_sizing_xs,s:g.container_sizing_s,m:g.container_sizing_m,l:g.container_sizing_l,xl:g.container_sizing_xl,xxl:g.container_sizing_xxl,full:"100%"};function De(e,t){const{visible:o,onClose:a,children:l,width:i="m",height:r,variant:d,"data-testid":u="modal",...f}=e;let c=i;(c==="full-with-padding"||c==="full-width-padding")&&(c="full-with-margin");const x=r?Ie[r]:void 0;return s.jsx(ie,{visible:o,onClose:a,"data-testid":u,"data-size":typeof d>"u"&&c,"data-variant":d,ref:t,...f,style:{blockSize:x},className:E.modal,children:o?l:null})}function V(e,t){return!e||!t?!1:e===t||t.contains(e)}function Ne(e){if(!e)return!1;const t=document.querySelectorAll("[data-floating-ui-portal]");for(let o=0;o<t.length;o++)if(V(e,t[o]))return!0;return!1}function Ee(e){if(!e)return!1;const t=e.getAttribute("role")==="dialog"||e.getAttribute("aria-modal")==="true",o=!!e.querySelector("[role=dialog]")||!!e.querySelector("[aria-modal=true]"),a=!!e.closest("[role=dialog]")||!!e.closest("[aria-modal=true]");return t||o||a}function Me(e){n.useEffect(()=>{const t=document.body.style.overscrollBehavior,o=document.documentElement.style.overscrollBehavior,a=navigator.userAgent.toLowerCase(),l=a.includes("safari")&&!a.includes("chrome");return e&&(l?document.documentElement.style.overscrollBehavior="none":document.body.style.overscrollBehavior="none"),()=>{document.body.style.overscrollBehavior=t,document.documentElement.style.overscrollBehavior=o}},[e])}function Re(e,t,o,a){n.useEffect(()=>{e.visible?(t.trigger=document.activeElement,t.addEventListener(),t.focusOnFirst()):t.trigger?.focus();const l=i=>{const r=o.current?.querySelectorAll(te);e.visible&&!a&&r&&r.length>0&&!(V(i.relatedTarget,o.current)||Ne(i.relatedTarget)||Ee(i.relatedTarget))&&r[0].focus()};return o.current?.addEventListener("focusout",l),()=>{o.current?.removeEventListener("focusout",l),t.removeEventListener()}},[e.visible])}function Se({defaultVisible:e,visible:t,onClose:o,preventEscaping:a,preventFocus:l,preventInteractiveBackdrop:i}){const r=ce({visible:t,defaultVisible:e,onClose:o}),d=n.useRef(null),u=n.useRef(null),f=n.useRef(null),c=n.useRef(!1),x=n.useCallback(()=>{c.current||(c.current=!0,r.onClose(),setTimeout(()=>{f.current&&!l&&f.current.focus(),c.current=!1},0))},[r.onClose,l]),b=n.useMemo(()=>new ee,[]);b.onClose=x,b.preventEscaping=a,b.preventFocus=l,b.setReference(u),Me(r.visible),Re(r,b,u,l);const p=n.useCallback(v=>{!a&&!i&&v.target===d.current&&x()},[a,i,x]),h=n.useCallback(()=>{!a&&!i&&x()},[a,i,x]);return{visible:r.visible,onClose:x,onHideDialog:h,onClickBackdropHandler:p,backdropRef:d,containerRef:u}}const G=n.forwardRef(J),U=n.forwardRef((e,t)=>s.jsx(G,{jsx:!0,...e,ref:t}));U.displayName="Modal.Root";const Ke=Object.assign(G,{Root:U,Content:e=>s.jsx(R,{padding:!1,...e}),Header:M,Actions:S});function J(e,t){const{"aria-labelledby":o,"aria-describedby":a,defaultVisible:l,variant:i,visible:r,onClose:d,preventInteractiveBackdrop:u,preventEscaping:f,preventFocus:c,headerTitle:x,headerDescription:b,headerLabelClose:p,headerInfoIconTooltip:h,headerIcon:v,headerLabelBack:w,headerOnClickBack:C,labelClose:B,contentPadding:I,footerMetaLabel:D,footerLeft:L,footerActions:z,footerLabelClose:K,children:A,jsx:Q,"data-testid":j="modal",...W}=e,_=Se({visible:r,defaultVisible:l,onClose:d,preventEscaping:f,preventFocus:c,preventInteractiveBackdrop:u}),Z=oe([_.containerRef,t]),O=T(),F=T(),y=n.useMemo(()=>({labelId:o||O,descId:a||F}),[O,F,o,a]);return s.jsx(be,{visible:_.visible,"data-testid":`${j}.backdrop`,onClick:_.onClickBackdropHandler,ref:_.backdropRef,children:s.jsxs(we,{...W,tabIndex:0,"aria-modal":"true",onClose:_.onHideDialog,visible:_.visible,ref:Z,"data-testid":j,"aria-labelledby":y.labelId,"aria-describedby":y.descId,variant:i,children:[!!x&&s.jsx(M,{"data-testid":`${j}.header`,labelId:y.labelId,descriptionId:y.descId,onClickClose:_.onClose,description:b,labelClose:p,preventClose:f,infoIconTooltip:h,icon:v,labelBack:w,onClickBack:C,children:x}),Q||i?s.jsx($.Provider,{value:y,children:A}):s.jsx(R,{padding:I,children:A}),(!!z||!!L)&&s.jsx(S,{"data-testid":`${j}.actions`,left:L,metaLabel:D,labelClose:K,onClickClose:_.onClose,preventClose:f,children:z})]})})}J.displayName="Modal";export{Ke as M,k as d,de as u};
