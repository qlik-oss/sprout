import{j as e,r as o}from"./iframe-qjjAf_pH.js";import{u as I}from"./useValueControl-CExQO3qq.js";import{t as j}from"./sprout-tokens-D9QRO1qB.js";import{F as H}from"./Error-BrLGh9jC.js";import{m as M}from"./renderOrClone-CXS0BGZe.js";import{c as u}from"./classNames-BVAN1ZTN.js";import{u as Z}from"./useI18n-DleVkSsM.js";import{s as A}from"./sprout-Dvd5rbSu.js";import{B as O}from"./Button-cYFf5aNk.js";import{I as W}from"./InputButton-C0Pq6Rob.js";import{u as q}from"./useFieldProps-BNEikc4J.js";import{F as D}from"./Field-Cf7Db6oK.js";const F=A.classNames("flex","items-center","m-s"),G=A.classNames("flex","bg-moderate","radius-pill");function J({children:l,...t}){return e.jsx("span",{className:G,...t,children:l})}function E({affix:l}){if(o.isValidElement(l))return e.jsx("span",{className:F,children:l});const t=l;return t.icon&&o.isValidElement(t.icon)&&(t.icon=o.cloneElement(t.icon,{height:void 0,width:void 0})),e.jsx("span",{className:F,children:e.jsx(J,{children:e.jsx(O,{...t,variant:"quiet",size:"small"})})})}function K(){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{clipPath:"url(#clip0_21219_5739)",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58757 11.4149C7.80411 11.79 6.92658 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6C12 6.92597 11.7902 7.80296 11.4156 8.58602L15.5173 12.586C16.1156 13.1695 16.1217 14.1296 15.5307 14.7205L14.8238 15.4274C14.2432 16.008 13.3037 16.0139 12.7159 15.4407L8.58757 11.4149ZM11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11C8.76142 11 11 8.76142 11 6ZM9.47992 10.8883L13.4141 14.7247C13.61 14.9158 13.9232 14.9138 14.1167 14.7203L14.8236 14.0134C15.0206 13.8164 15.0185 13.4964 14.8191 13.3019L10.8931 9.47323C10.5043 10.02 10.0261 10.4988 9.47992 10.8883Z",fill:"currentColor"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_21219_5739",children:e.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}const Q="_input_m5wfv_2",U="_field_m5wfv_6",X="_fieldcontent_m5wfv_19",Y="_small_m5wfv_28",ee="_field_disabled_m5wfv_35",te="_field_error_m5wfv_41",i={input:Q,field:U,fieldcontent:X,small:Y,field_disabled:ee,field_error:te},R=u("font-label-s","text-weak","bg-transparent","h-full","flex","justify-center","items-center","self-center");function le(l,t){const[d,a]=l.split("-");return`calc(${`var(--sprout-${d}-font-${a}-line-height)`} - 2 * ${j.common_border_default_width} + 2 * ${t==="small"?j.common_spacing_s:j.common_spacing_m})`}const ne=o.forwardRef(L);function L(l,t){const{id:d,font:a,labelClear:m,leftAffix:r,leftIcon:p,rightAffix:h,leftAdornment:n,rightAdornment:x,readOnly:f=!1,disabled:v=!1,type:c,hasError:g,designSize:s,value:z,onChange:B,defaultValue:$,placeholder:b,...k}=l,S=Z(),C=o.useRef(null),T=S("input.clear"),N=s==="small"&&!a?"label-xs":a||"label-s",V=le(N,s),w=I({defaultValue:$,value:z,onChange:B});let y=c||"text";c==="search"&&(y="text");let _;return typeof b<"u"?_=b:c==="search"?_="":_=void 0,e.jsxs("div",{className:u("flex","border-box","border-moderate","radius-pill","w-full","flex-row","items-center","overflow-hidden",i.field,{[i.field_error]:!!g,[i.field_disabled]:v,[i.small]:s==="small"}),children:[r?e.jsx(E,{affix:r}):null,e.jsxs("div",{className:u("w-full","overflow-hidden",i.fieldcontent,{"gap-m":s!=="small","gap-s":s==="small"}),children:[e.jsxs("div",{className:u("w-full","flex","flex-row","pr-s","items-center","gap-m","text-default"),children:[n?e.jsx("span",{className:R,children:n}):null,c==="search"?e.jsx(K,{}):p,e.jsx("input",{...k,...w,placeholder:_,id:d,type:y,ref:M([t,C]),disabled:v,readOnly:f,className:u("flex","flex-row","items-center","m-0","p-0","bg-transparent","border-box","text-default","flex-1","border-none","block","w-full","truncate",i.input,{[`font-${N}`]:!0}),"aria-invalid":g?"true":void 0,"data-size":s,style:{blockSize:V}}),x?e.jsx("span",{className:R,children:x}):null]}),g?e.jsx(H,{"data-icon":"error","data-testid":"input-error-icon",width:void 0,height:void 0}):null]}),c==="search"&&e.jsx(W,{"data-feature":"input-search-clear",onClick:()=>{C.current&&(C.current.value=""),w.onChange&&w.onChange({target:{value:""}},"clear")},"aria-label":m||T,size:s==="small"?"xs":"s"}),h?e.jsx(E,{affix:h}):null]})}L.displayName="Input";const xe=o.forwardRef(P);function P({value:l,onChange:t,defaultValue:d,...a},m){const{fieldProps:r,inputProps:p,useField:h}=q(a),n=I({defaultValue:d,value:l,onChange:t}),x=r.maxCharacterCount&&n.value?String(n.value).length>r.maxCharacterCount:!1;let f=e.jsx(ne,{ref:m,...n,...p,hasError:x||p.hasError});return h&&(f=e.jsx(D,{...r,maxCharacterCount:typeof n.value=="string"?r.maxCharacterCount:void 0,currentCount:r.maxCharacterCount&&n.value?String(n.value).length:0,children:f})),f}P.displayName="TextField";export{J as A,xe as T};
